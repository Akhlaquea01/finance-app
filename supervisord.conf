[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
pidfile=/tmp/supervisord.pid

[program:backend]
command=/app/start-backend.sh
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=false
startretries=1
stopasgroup=true
killasgroup=true
stopsignal=TERM
stopwaitsecs=10
priority=10

[program:frontend]
command=/app/start-frontend.sh
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=false
startretries=1
stopasgroup=true
killasgroup=true
stopsignal=TERM
stopwaitsecs=10
priority=20

[program:nginx]
command=sh -c '/app/wait-for-services.sh && nginx -g "daemon off;"'
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=true
priority=30
startsecs=10
stopasgroup=true
killasgroup=true

